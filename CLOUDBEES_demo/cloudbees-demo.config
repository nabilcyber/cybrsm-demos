if [ "$CONJUR_HOME" == "" ]; then
  echo "Set CONJUR_HOME to parent dir of conjur config dir."
  exit -1
fi
source $CONJUR_HOME/config/conjur.config

export PROJECT_NAME=cbjenkins
export CLOUDBEES_DEMO_IMAGE=cloudbeesdemo
export CLOUDBEES_DEMO_CONTAINER=${PROJECT_NAME}demo
export CLOUDBEES_DEMO_VOLUME=$PROJECT_NAME
export CLOUDBEES_JENKINS_HOME=/var/lib/jenkins	# mountpoint for data volume to preserve state
export KEYSTORE=/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts
export WORKDIR=/demo
export CLOUDBEES_PORT=50000

# Conjur identity
export SERVICE_ID=$PROJECT_NAME			# authn-jwt endpoint ID
export JENKINS_HOSTNAME=$PROJECT_NAME/master	# app identity for authn-apikey
export JENKINS_HOST_API_KEY=""
export APP_IDENTITY_CLAIM=jenkins_full_name	# includes folder name

###########################
# authn-jwt config values
export JWT_POLICY_TEMPLATE=authn-jwt.yml.template
export JWKS_URI=http://$CONJUR_LEADER_HOSTNAME:$CLOUDBEES_PORT/jwtauth/conjur-jwk-set
export TOKEN_APP_PROPERTY=$APP_IDENTITY_CLAIM	# claim containing name of host identity
export IDENTITY_PATH=$PROJECT_NAME	# Conjur policy path to host identity definition
export JWT_ISSUER=http://$CONJUR_LEADER_HOSTNAME:$CLOUDBEES_PORT

# Note: all Conjur hosts must include annotations for enforced claims
#export ENFORCED_CLAIMS=jenkins_task_noun,jenkins_pronoun

# Note - cybr-cli uses these environment vars for non-interactive login as admin.
# These values are set in the global demo environment config files in $CONJUR_HOME/config.
# CONJUR_ACCOUNT
# CONJUR_APPLIANCE_URL
# CONJUR_AUTHN_LOGIN
# CONJUR_AUTHN_API_KEY
# CONJUR_CERT_FILE
